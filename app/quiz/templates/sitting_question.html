{% extends 'sitting_question_base.html' %}
{% load i18n %}

{% block tabcontent %}

  <div class="row">
    <div class="col">

    {% if question %}

      <p>
        <small class="muted">{% trans "Question category" %}:</small>
        <strong>{{ question.category }}</strong>
      </p>

      <p class="lead">{{ question.content|safe }}</p>

      {% if question.figure %}
          <img src="{{ question.figure.url }}" alt="{{ question.content|safe }}" />
      {% endif %}

      {% if user_answer.answer %}
        {% if user_answer.is_correct %}
          <div class="alert alert-soft-success">
        {% else %}
          <div class="alert alert-soft-danger">
        {% endif %}
            <p>{% trans "Your answer was" %}
              <strong>
                {{ user_answer.is_correct|yesno:"correct,incorrect" }}
              </strong>
            </p>
          </div>

          {% include 'correct_answer.html' %}

          {% if user_answer.order < nb_questions %}
            {% with next_question=user_answer.order|add:"1" %}
              <a class="btn btn-large btn-block btn-info" href="{% url 'quiz:sitting_question' sitting.id next_question %}">{% trans "Next" %}</a>
            {% endwith %}
          {% else %}
            <a class="btn btn-large btn-block btn-info" href="">{% trans "See results" %}</a>
          {% endif %}

      {% else %}

        <form action="" method="POST">{% csrf_token %}
          <input type=hidden name="question_id" value="{{ question.id }}">

          <ul class="list-group mb-4">

          {% for answer in form.answers %}
            <li class="list-group-item">
              {{ answer }}
            </li>
          {% endfor %}

          </ul>
          <input type="submit" value={% trans "Check" %} class="btn btn-large btn-block btn-primary" >
        </form>
      {% endif %}
    {% endif %}
  </div>
</div>
{% endblock %}
